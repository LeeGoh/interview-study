2023/01/06

### 🧑‍💻 **기술블로깅 TechBlog** 🪚

<aside>
💡 Stack vs Heap

</aside>

* 공부를 위해서 하는 블로깅으로 잘못된 정보가 있을 수 있습니다.

<br><br>

## [ OS ] 스택과 힙의 차이점

**+ Stack 스택 영역**

---

**함수의 호출과 관계되는 지역 변수와 매개변수가 저장되는 영역**

함수의 호출과 함께 할당, 함수의 호출이 완료되면 소멸

푸시(push) 동작으로 데이터를 저장하고, 팝(pop) 동작으로 데이터를 인출

가장 늦게 저장된 데이터가 가장 먼저 인출되는 **후입선출**(**LIFO, Last-In First-Out**) 방식

메모리의 높은 주소에서 낮은 주소 방향으로 할당

크기가 제한되어 있고 힙에 비해 상대적으로 빠름

컴파일 시 크기 결정

<br><br>

**+ Heap 힙 영역**

---

**사용자가 직접 관리할 수 있고 관리 해야만 하는 영역**

사용자에 의해 메모리 공간이 동적으로 할당되고 해제

직접 메모리를 관리해야 하고 속도가 스택에 비해 상대적으로 느림

new 로 생성하는 object들이 저장되는 영역

메모리의 낮은 주소에서 높은 주소의 방향으로 할당

메모리 크기에 제한 없음 

런타임 시 크기 결정

<br><br>

🔩 **스택과 힙의 차이점**

---

- 스택은 힙에 비해 상대적으로 **엑세스 속도**가 빠름 힙은 상대적으로 느림
- 스택은 **메모리 크기**를 변경할 수 없지만 힙은 동적으로 변경할 수 있음
- 스택은 함수가 종료되면 자동으로 해제되지만 힙은 수동으로 해제해야 함
- 같은 물리 메모리 공간을 공유 하지만 서로의 영역을 침범할 경우 오버플로우 발생
    
    스택이 힙을 침범할경우 : Stack overflow
    
    힙이 스택을 침범할경우 : Heap overflow
    

<br><br>

🔩 **예비 답변**

---

Q. 스택과 힙의 차이점에 대해 말해보세요.

스택 영역은 함수의 호출과 관계되어 있는 지역 변수와 매개변수가 저장되는 영역이며, 힙 영역은 사용자가 직접 관리할 수 있는 영역입니다.

스택 영역은 함수가 호출되면 함께 할당되고, 함수의 호출이 완료되면 소멸되지만 힙 영역은 사용자에 의해서 메모리 공간이 동적으로 할당되고 해제됩니다. 또한 스택 영역은 메모리 크기를 변경할 수 없지만 힙 영역은 동적으로 변경이 가능하며, 힙에 비해 스택은 상대적으로 엑세스 속도가 빠르고 반대로 힙은 엑세스 속도가 상대적으로 느리다는 차이점이 있습니다.

스택과 힙의 경우 같은 물리 메모리 공간을 공유하지만 사용하는 이유가 다르고, 스택은 높은 주소부터, 힙은 낮은 주소부터 채워지기 때문에 서로의 영역을 침범할 경우 오버플로우가 발생할 수 있어 주의해야 합니다.

<br>

Q. 힙 영역의 경우 힙 영역을 크게 잡으면 안되는 이유가 무엇인가요.

가비지 콜렉터의 경우 힙 영역에서 사용중이거나 사용되지 않는 메모리를 인식하여 GC 작업을 하는데, 힙 영역을 너무 크게 잡는다면 GC의 수행 시간이 너무 오래 걸리기 때문에 힙 영역을 지나치게 크게 잡으면 안된다고 생각합니다.

<br><br>

🔩 **참고**

---

블로그

[스택(Stack), 힙(Heap) 메모리의 차이점과 메모리 할당(Memory Allocation)](https://blog.naver.com/PostView.nhn?blogId=techref&logNo=222274484731)

[운영체제의 메모리영역 / 스택(stack) vs 힙(heap)](https://mentum.tistory.com/475)

[17. 도대체 GC는 언제 발생할까?](https://velog.io/@jsj3282/17.-%EB%8F%84%EB%8C%80%EC%B2%B4-GC%EB%8A%94-%EC%96%B8%EC%A0%9C-%EB%B0%9C%EC%83%9D%ED%95%A0%EA%B9%8C)

<br><br>
